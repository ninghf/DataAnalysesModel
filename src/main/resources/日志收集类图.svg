<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="593px" preserveAspectRatio="none" style="width:886px;height:593px;" version="1.1" viewBox="0 0 886 593" width="886px" zoomAndPan="magnify"><defs><filter height="300%" id="f1l7pzeev7icay" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Runnable--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="Runnable" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="220" y="506"/><ellipse cx="235" cy="522" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M231.5938,516.2813 L231.5938,515.875 L237.9063,515.875 L237.9063,516.2813 L235.375,516.2813 Q235.375,516.2813 235.5234,516.4141 Q235.6719,516.5469 235.6719,516.8125 L235.6719,526.2969 Q235.6719,526.5625 235.8906,526.6953 Q236.1094,526.8281 236.1094,526.8281 L237.9063,526.8281 L237.9063,527.2344 L231.5938,527.2344 L231.5938,526.8281 L233.125,526.8281 Q233.4531,526.8281 233.5859,526.6953 Q233.7188,526.5625 233.7188,526.2969 L233.7188,516.8125 Q233.7188,516.5469 233.5859,516.4141 Q233.4531,516.2813 233.125,516.2813 L231.5938,516.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="55" x="249" y="527.5576">Runnable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="221" x2="306" y1="538" y2="538"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="221" x2="306" y1="546" y2="546"/><!--class Netty--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="Netty" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="687" y="135"/><ellipse cx="702" cy="151" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M700.5781,156.3594 Q698.7188,156.3594 697.625,154.9688 Q696.5313,153.5781 696.5313,150.5938 Q696.5313,148.0625 697.6953,146.4063 Q698.8594,144.75 700.8438,144.75 Q702.3125,144.75 702.7813,144.875 Q703.25,145.0781 703.25,145.0781 Q703.25,145.0781 703.25,145.0078 Q703.25,144.9375 703.8594,144.0156 L704.9063,147.6719 L703.5781,148.0781 Q703.1094,146.5313 702.4453,145.8672 Q701.7813,145.2031 700.7188,145.2031 Q700.3281,145.2031 699.5625,146.7344 Q698.7969,148.2656 698.7969,150.5156 Q698.7969,152.9844 699.4609,154.375 Q700.125,155.7656 700.6563,155.7656 Q701.7188,155.7656 702.4766,155 Q703.2344,154.2344 703.5781,152.5781 L704.9063,153.1719 Q704.5781,154.5781 703.6797,155.4688 Q702.7813,156.3594 700.5781,156.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="27" x="716" y="156.5576">Netty</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="688" x2="745" y1="167" y2="167"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="688" x2="745" y1="175" y2="175"/><!--class DataPacket--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="153.1606" id="DataPacket" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="684" y="262"/><ellipse cx="744.75" cy="278" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M743.3281,283.3594 Q741.4688,283.3594 740.375,281.9688 Q739.2813,280.5781 739.2813,277.5938 Q739.2813,275.0625 740.4453,273.4063 Q741.6094,271.75 743.5938,271.75 Q745.0625,271.75 745.5313,271.875 Q746,272.0781 746,272.0781 Q746,272.0781 746,272.0078 Q746,271.9375 746.6094,271.0156 L747.6563,274.6719 L746.3281,275.0781 Q745.8594,273.5313 745.1953,272.8672 Q744.5313,272.2031 743.4688,272.2031 Q743.0781,272.2031 742.3125,273.7344 Q741.5469,275.2656 741.5469,277.5156 Q741.5469,279.9844 742.2109,281.375 Q742.875,282.7656 743.4063,282.7656 Q744.4688,282.7656 745.2266,282 Q745.9844,281.2344 746.3281,279.5781 L747.6563,280.1719 Q747.3281,281.5781 746.4297,282.4688 Q745.5313,283.3594 743.3281,283.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="765.25" y="283.5576">DataPacket</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="685" x2="876" y1="294" y2="294"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="692" y="304.0115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="704" y="310.606">Object obj</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="692" y="319.0344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="704" y="325.6289">long recvTime</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="692" y="334.0574"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="704" y="340.6519">ProtocolType type</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="692" y="349.0803"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="704" y="355.6748">DataProtocol protocol</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="692" y="364.1033"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="704" y="370.6978">UserData userData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="685" x2="876" y1="377.1147" y2="377.1147"/><ellipse cx="695" cy="390.1262" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="704" y="393.7207">DataProtocol : parseDataProtocol()</text><ellipse cx="695" cy="405.1492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="704" y="408.7437">UserData : parseUserData()</text><!--class UserData--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="UserData" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="738" y="506"/><ellipse cx="753" cy="522" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M751.5781,527.3594 Q749.7188,527.3594 748.625,525.9688 Q747.5313,524.5781 747.5313,521.5938 Q747.5313,519.0625 748.6953,517.4063 Q749.8594,515.75 751.8438,515.75 Q753.3125,515.75 753.7813,515.875 Q754.25,516.0781 754.25,516.0781 Q754.25,516.0781 754.25,516.0078 Q754.25,515.9375 754.8594,515.0156 L755.9063,518.6719 L754.5781,519.0781 Q754.1094,517.5313 753.4453,516.8672 Q752.7813,516.2031 751.7188,516.2031 Q751.3281,516.2031 750.5625,517.7344 Q749.7969,519.2656 749.7969,521.5156 Q749.7969,523.9844 750.4609,525.375 Q751.125,526.7656 751.6563,526.7656 Q752.7188,526.7656 753.4766,526 Q754.2344,525.2344 754.5781,523.5781 L755.9063,524.1719 Q755.5781,525.5781 754.6797,526.4688 Q753.7813,527.3594 751.5781,527.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="767" y="527.5576">UserData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="739" x2="822" y1="538" y2="538"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="739" x2="822" y1="546" y2="546"/><!--class ProtocolType--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="ProtocolType" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="620" y="8"/><ellipse cx="635" cy="24" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M631.5313,18.2813 L631.5313,17.875 L639.0469,17.875 L639.7656,20.1406 L638.5938,20.5938 Q637.9063,19.2656 637.3125,18.7734 Q636.7188,18.2813 635.9844,18.2813 L634.125,18.2813 Q634.125,18.2813 634.2578,18.4141 Q634.3906,18.5469 634.3906,18.8125 L634.3906,22.9219 L635.4531,22.9219 Q636.1094,22.9219 636.4141,22.5938 Q636.7188,22.2656 636.7188,21.5938 L636.7188,21.2031 L638.1094,21.2031 L638.1094,25.1094 L636.7188,25.1094 L636.7188,24.8438 Q636.7188,24.125 636.4141,23.7266 Q636.1094,23.3281 635.4531,23.3281 L634.5313,23.3281 L634.5313,28.2969 Q634.5313,28.5625 634.6953,28.6953 Q634.8594,28.8281 634.8594,28.8281 L635.8438,28.8281 Q636.8438,28.8281 637.5391,28.2656 Q638.2344,27.7031 638.75,26.1875 L639.9688,26.6406 L639.2344,29.2344 L631.4688,29.2344 L631.4688,28.8281 L631.8594,28.8281 Q632.2031,28.8281 632.3359,28.6953 Q632.4688,28.5625 632.4688,28.2969 L632.4688,18.8125 Q632.4688,18.5469 632.3359,18.4141 Q632.2031,18.2813 631.8594,18.2813 L631.5313,18.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="649" y="29.5576">ProtocolType</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="621" x2="722" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="621" x2="722" y1="48" y2="48"/><!--class DataProtocol--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="DataProtocol" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="758" y="8"/><ellipse cx="773" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M771.5781,29.3594 Q769.7188,29.3594 768.625,27.9688 Q767.5313,26.5781 767.5313,23.5938 Q767.5313,21.0625 768.6953,19.4063 Q769.8594,17.75 771.8438,17.75 Q773.3125,17.75 773.7813,17.875 Q774.25,18.0781 774.25,18.0781 Q774.25,18.0781 774.25,18.0078 Q774.25,17.9375 774.8594,17.0156 L775.9063,20.6719 L774.5781,21.0781 Q774.1094,19.5313 773.4453,18.8672 Q772.7813,18.2031 771.7188,18.2031 Q771.3281,18.2031 770.5625,19.7344 Q769.7969,21.2656 769.7969,23.5156 Q769.7969,25.9844 770.4609,27.375 Q771.125,28.7656 771.6563,28.7656 Q772.7188,28.7656 773.4766,28 Q774.2344,27.2344 774.5781,25.5781 L775.9063,26.1719 Q775.5781,27.5781 774.6797,28.4688 Q773.7813,29.3594 771.5781,29.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="787" y="29.5576">DataProtocol</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="759" x2="860" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="759" x2="860" y1="48" y2="48"/><!--class AbstractQueue--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="108.0918" id="AbstractQueue" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="6" y="476"/><ellipse cx="43.05" cy="492" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M41.6281,497.3594 Q39.7688,497.3594 38.675,495.9688 Q37.5813,494.5781 37.5813,491.5938 Q37.5813,489.0625 38.7453,487.4063 Q39.9094,485.75 41.8938,485.75 Q43.3625,485.75 43.8313,485.875 Q44.3,486.0781 44.3,486.0781 Q44.3,486.0781 44.3,486.0078 Q44.3,485.9375 44.9094,485.0156 L45.9563,488.6719 L44.6281,489.0781 Q44.1594,487.5313 43.4953,486.8672 Q42.8313,486.2031 41.7688,486.2031 Q41.3781,486.2031 40.6125,487.7344 Q39.8469,489.2656 39.8469,491.5156 Q39.8469,493.9844 40.5109,495.375 Q41.175,496.7656 41.7063,496.7656 Q42.7688,496.7656 43.5266,496 Q44.2844,495.2344 44.6281,493.5781 L45.9563,494.1719 Q45.6281,495.5781 44.7297,496.4688 Q43.8313,497.3594 41.6281,497.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="61.95" y="497.5576">AbstractQueue</text><rect fill="#FFFFFF" height="18.3887" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="9" x="173" y="473"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="7" x="174" y="487.752">T</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="178" y1="508" y2="508"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="518.0115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="26" y="524.606">Map&lt;Integer, Queue&lt;T&gt;&gt; map;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="178" y1="531.0229" y2="531.0229"/><ellipse cx="17" cy="544.0344" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="26" y="547.6289">void : init(int queueCount)</text><ellipse cx="17" cy="559.0574" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="26" y="562.6519">void : offer(T t)</text><ellipse cx="17" cy="574.0803" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="26" y="577.6748">void : bind(ILoop loop)</text><!--class DataPacketQueue--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="DataPacketQueue" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="508.5" y="314.5"/><ellipse cx="523.5" cy="330.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M522.0781,335.8594 Q520.2188,335.8594 519.125,334.4688 Q518.0313,333.0781 518.0313,330.0938 Q518.0313,327.5625 519.1953,325.9063 Q520.3594,324.25 522.3438,324.25 Q523.8125,324.25 524.2813,324.375 Q524.75,324.5781 524.75,324.5781 Q524.75,324.5781 524.75,324.5078 Q524.75,324.4375 525.3594,323.5156 L526.4063,327.1719 L525.0781,327.5781 Q524.6094,326.0313 523.9453,325.3672 Q523.2813,324.7031 522.2188,324.7031 Q521.8281,324.7031 521.0625,326.2344 Q520.2969,327.7656 520.2969,330.0156 Q520.2969,332.4844 520.9609,333.875 Q521.625,335.2656 522.1563,335.2656 Q523.2188,335.2656 523.9766,334.5 Q524.7344,333.7344 525.0781,332.0781 L526.4063,332.6719 Q526.0781,334.0781 525.1797,334.9688 Q524.2813,335.8594 522.0781,335.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="537.5" y="336.0576">DataPacketQueue</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="509.5" x2="639.5" y1="346.5" y2="346.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="509.5" x2="639.5" y1="354.5" y2="354.5"/><!--class MongoDataQueue--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="MongoDataQueue" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="6.5" y="314.5"/><ellipse cx="21.5" cy="330.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M20.0781,335.8594 Q18.2188,335.8594 17.125,334.4688 Q16.0313,333.0781 16.0313,330.0938 Q16.0313,327.5625 17.1953,325.9063 Q18.3594,324.25 20.3438,324.25 Q21.8125,324.25 22.2813,324.375 Q22.75,324.5781 22.75,324.5781 Q22.75,324.5781 22.75,324.5078 Q22.75,324.4375 23.3594,323.5156 L24.4063,327.1719 L23.0781,327.5781 Q22.6094,326.0313 21.9453,325.3672 Q21.2813,324.7031 20.2188,324.7031 Q19.8281,324.7031 19.0625,326.2344 Q18.2969,327.7656 18.2969,330.0156 Q18.2969,332.4844 18.9609,333.875 Q19.625,335.2656 20.1563,335.2656 Q21.2188,335.2656 21.9766,334.5 Q22.7344,333.7344 23.0781,332.0781 L24.4063,332.6719 Q24.0781,334.0781 23.1797,334.9688 Q22.2813,335.8594 20.0781,335.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="35.5" y="336.0576">MongoDataQueue</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7.5" x2="137.5" y1="346.5" y2="346.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7.5" x2="137.5" y1="354.5" y2="354.5"/><!--class ILoop--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="78.0459" id="ILoop" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="174" y="299.5"/><ellipse cx="237.75" cy="315.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M234.3438,309.7813 L234.3438,309.375 L240.6563,309.375 L240.6563,309.7813 L238.125,309.7813 Q238.125,309.7813 238.2734,309.9141 Q238.4219,310.0469 238.4219,310.3125 L238.4219,319.7969 Q238.4219,320.0625 238.6406,320.1953 Q238.8594,320.3281 238.8594,320.3281 L240.6563,320.3281 L240.6563,320.7344 L234.3438,320.7344 L234.3438,320.3281 L235.875,320.3281 Q236.2031,320.3281 236.3359,320.1953 Q236.4688,320.0625 236.4688,319.7969 L236.4688,310.3125 Q236.4688,310.0469 236.3359,309.9141 Q236.2031,309.7813 235.875,309.7813 L234.3438,309.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="32" x="258.25" y="321.0576">ILoop</text><rect fill="#FFFFFF" height="18.3887" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="9" x="347" y="296.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="7" x="348" y="311.252">T</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="175" x2="352" y1="331.5" y2="331.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="175" x2="352" y1="339.5" y2="339.5"/><ellipse cx="185" cy="352.5115" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="194" y="356.106">void : bind()</text><ellipse cx="185" cy="367.5344" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="194" y="371.1289">void : doBind(Queue&lt;T&gt; queue)</text><!--class Algorithm--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="Algorithm" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="388" y="314.5"/><ellipse cx="403" cy="330.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M399.5938,324.7813 L399.5938,324.375 L405.9063,324.375 L405.9063,324.7813 L403.375,324.7813 Q403.375,324.7813 403.5234,324.9141 Q403.6719,325.0469 403.6719,325.3125 L403.6719,334.7969 Q403.6719,335.0625 403.8906,335.1953 Q404.1094,335.3281 404.1094,335.3281 L405.9063,335.3281 L405.9063,335.7344 L399.5938,335.7344 L399.5938,335.3281 L401.125,335.3281 Q401.4531,335.3281 401.5859,335.1953 Q401.7188,335.0625 401.7188,334.7969 L401.7188,325.3125 Q401.7188,325.0469 401.5859,324.9141 Q401.4531,324.7813 401.125,324.7813 L399.5938,324.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="417" y="336.0576">Algorithm</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="389" x2="472" y1="346.5" y2="346.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="389" x2="472" y1="354.5" y2="354.5"/><!--class AlgorithmLoop--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="AlgorithmLoop" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="374" y="135"/><ellipse cx="389" cy="151" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M389.375,150.9844 L387.3906,150.9844 L386.7969,153.5 Q386.7344,153.8438 386.7344,154.0313 Q386.7344,154.2969 386.8281,154.5625 Q386.9219,154.8281 386.9219,154.8281 L387.5938,154.8281 L387.5938,155.2344 L384.1406,155.2344 L384.1406,154.8281 L384.3281,154.8281 Q384.5938,154.8281 384.7969,154.6641 Q385,154.5 385.0625,154.1094 L387.6563,143.9375 L389.5313,143.3281 L392.1719,154.1094 Q392.3125,154.5 392.5078,154.6641 Q392.7031,154.8281 392.7031,154.8281 L393.1719,154.8281 L393.1719,155.2344 L389.3125,155.2344 L389.3125,154.8281 L389.5781,154.8281 Q389.9844,154.8281 390.0469,154.6641 Q390.1094,154.5 390.1094,154.375 Q390.1094,154.1094 390.0469,153.9063 L389.375,150.9844 Z M387.9844,145.0781 L387.9844,145.0781 L387.5313,150.5781 L389.3125,150.5781 L387.9844,145.0781 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="403" y="156.5576">AlgorithmLoop</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="375" x2="486" y1="167" y2="167"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="375" x2="486" y1="175" y2="175"/><!--class MongoLoop--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="MongoLoop" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="24" y="135"/><ellipse cx="39" cy="151" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M39.375,150.9844 L37.3906,150.9844 L36.7969,153.5 Q36.7344,153.8438 36.7344,154.0313 Q36.7344,154.2969 36.8281,154.5625 Q36.9219,154.8281 36.9219,154.8281 L37.5938,154.8281 L37.5938,155.2344 L34.1406,155.2344 L34.1406,154.8281 L34.3281,154.8281 Q34.5938,154.8281 34.7969,154.6641 Q35,154.5 35.0625,154.1094 L37.6563,143.9375 L39.5313,143.3281 L42.1719,154.1094 Q42.3125,154.5 42.5078,154.6641 Q42.7031,154.8281 42.7031,154.8281 L43.1719,154.8281 L43.1719,155.2344 L39.3125,155.2344 L39.3125,154.8281 L39.5781,154.8281 Q39.9844,154.8281 40.0469,154.6641 Q40.1094,154.5 40.1094,154.375 Q40.1094,154.1094 40.0469,153.9063 L39.375,150.9844 Z M37.9844,145.0781 L37.9844,145.0781 L37.5313,150.5781 L39.3125,150.5781 L37.9844,145.0781 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="53" y="156.5576">MongoLoop</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="25" x2="120" y1="167" y2="167"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="25" x2="120" y1="175" y2="175"/><!--class AlgorithmLoopGroup--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="AlgorithmLoopGroup" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="438.5" y="8"/><ellipse cx="453.5" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M452.0781,29.3594 Q450.2188,29.3594 449.125,27.9688 Q448.0313,26.5781 448.0313,23.5938 Q448.0313,21.0625 449.1953,19.4063 Q450.3594,17.75 452.3438,17.75 Q453.8125,17.75 454.2813,17.875 Q454.75,18.0781 454.75,18.0781 Q454.75,18.0781 454.75,18.0078 Q454.75,17.9375 455.3594,17.0156 L456.4063,20.6719 L455.0781,21.0781 Q454.6094,19.5313 453.9453,18.8672 Q453.2813,18.2031 452.2188,18.2031 Q451.8281,18.2031 451.0625,19.7344 Q450.2969,21.2656 450.2969,23.5156 Q450.2969,25.9844 450.9609,27.375 Q451.625,28.7656 452.1563,28.7656 Q453.2188,28.7656 453.9766,28 Q454.7344,27.2344 455.0781,25.5781 L456.4063,26.1719 Q456.0781,27.5781 455.1797,28.4688 Q454.2813,29.3594 452.0781,29.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114" x="467.5" y="29.5576">AlgorithmLoopGroup</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="439.5" x2="583.5" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="439.5" x2="583.5" y1="48" y2="48"/><!--class MongoLoopGroup--><rect fill="#FEFECE" filter="url(#f1l7pzeev7icay)" height="48" id="MongoLoopGroup" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="85" y="8"/><ellipse cx="100" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M98.5781,29.3594 Q96.7188,29.3594 95.625,27.9688 Q94.5313,26.5781 94.5313,23.5938 Q94.5313,21.0625 95.6953,19.4063 Q96.8594,17.75 98.8438,17.75 Q100.3125,17.75 100.7813,17.875 Q101.25,18.0781 101.25,18.0781 Q101.25,18.0781 101.25,18.0078 Q101.25,17.9375 101.8594,17.0156 L102.9063,20.6719 L101.5781,21.0781 Q101.1094,19.5313 100.4453,18.8672 Q99.7813,18.2031 98.7188,18.2031 Q98.3281,18.2031 97.5625,19.7344 Q96.7969,21.2656 96.7969,23.5156 Q96.7969,25.9844 97.4609,27.375 Q98.125,28.7656 98.6563,28.7656 Q99.7188,28.7656 100.4766,28 Q101.2344,27.2344 101.5781,25.5781 L102.9063,26.1719 Q102.5781,27.5781 101.6797,28.4688 Q100.7813,29.3594 98.5781,29.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="114" y="29.5576">MongoLoopGroup</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="86" x2="215" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="86" x2="215" y1="48" y2="48"/><!--link Netty to DataPacketQueue--><path d="M674.19,171.431 C651.678,179.562 625.26,192.717 608.5,213 C587.96,237.857 579.769,274.112 576.533,301.095 " fill="none" id="Netty-DataPacketQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="575.254,314.25,580.1066,305.6795,575.7381,309.2735,572.1441,304.905,575.254,314.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="575.7381" x2="576.5125" y1="309.2735" y2="301.3115"/><polygon fill="#FFFFFF" points="686.549,167.313,679.5922,165.4149,675.1644,171.1065,682.1212,173.0046,686.549,167.313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="609.5" y="228.8979">offer(顺序添加数据包)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="671.8135" y="165.2549">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="567.516" y="303.4478">1</text><!--link Netty to DataPacket--><path d="M728.279,183.179 C732.712,192.345 737.616,203.049 741.5,213 C746.976,227.028 752.238,242.167 757.028,256.893 " fill="none" id="Netty-DataPacket" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="758.634,261.87,759.6765,252.0765,757.0984,257.1117,752.0632,254.5335,758.634,261.87" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="748.5" y="228.8979">new()</text><!--link DataPacket to UserData--><path d="M780.5,428.236 C780.5,450.979 780.5,474.185 780.5,492.5864 " fill="none" id="DataPacket-UserData" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="780.5,505.6337,784.5,496.6337,780.5,500.6337,776.5,496.6337,780.5,505.6337" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="780.5" x2="780.5" y1="500.6337" y2="492.6337"/><polygon fill="#FFFFFF" points="780.5,415.212,776.5,421.212,780.5,427.212,784.5,421.212,780.5,415.212" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="773.1773" y="437.9928">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="772.6031" y="495.2063">1</text><!--link DataPacketQueue to AbstractQueue--><path d="M555.112,362.505 C539.426,379.602 515.843,402.112 490.5,415 C373.874,474.307 326.328,433.744 202.5,476 C200.931,476.535 199.355,477.088 197.775,477.655 " fill="none" id="DataPacketQueue-AbstractQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="200.235,484.2088,179.058,484.9435,195.155,471.163,200.235,484.2088" style="stroke: #A80036; stroke-width: 1.0;"/><!--link MongoDataQueue to AbstractQueue--><path d="M74.9524,362.736 C77.397,385.899 81.2802,422.692 84.7728,455.785 " fill="none" id="MongoDataQueue-AbstractQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="91.7427,455.132,86.8807,475.757,77.8201,456.602,91.7427,455.132" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ILoop to Runnable--><path d="M263.5,377.848 C263.5,409.042 263.5,453.061 263.5,485.5539 " fill="none" id="ILoop-Runnable" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="270.5,485.9087,263.5,505.9087,256.5,485.9086,270.5,485.9087" style="stroke: #A80036; stroke-width: 1.0;"/><!--link AlgorithmLoop to ILoop--><path d="M408.668,183.205 C384.593,208.793 345.066,250.806 313.332,284.535 " fill="none" id="AlgorithmLoop-ILoop" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="318.186,289.591,299.383,299.36,307.99,279.997,318.186,289.591" style="stroke: #A80036; stroke-width: 1.0;"/><!--link AlgorithmLoop to Algorithm--><path d="M430.5,183.205 C430.5,211.243 430.5,259.001 430.5,293.973 " fill="none" id="AlgorithmLoop-Algorithm" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="437.5,294.289,430.5,314.289,423.5,294.289,437.5,294.289" style="stroke: #A80036; stroke-width: 1.0;"/><!--link MongoLoop to ILoop--><path d="M97.4699,183.205 C125.252,209.024 171.028,251.564 207.485,285.444 " fill="none" id="MongoLoop-ILoop" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="212.575,280.618,222.46,299.36,203.044,290.873,212.575,280.618" style="stroke: #A80036; stroke-width: 1.0;"/><!--link AlgorithmLoopGroup to AlgorithmLoop--><path d="M478.555,66.32 C473.174,72.592 467.921,79.294 463.5,86 C456.029,97.332 449.413,110.63 444.104,122.693 " fill="none" id="AlgorithmLoopGroup-AlgorithmLoop" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="439.063,134.683,446.2385,127.9367,441.0009,130.0738,438.8638,124.8362,439.063,134.683" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="441.0009" x2="444.1015" y1="130.0738" y2="122.6985"/><polygon fill="#FFFFFF" points="487.609,56.248,480.6232,58.0366,479.5874,65.1729,486.5732,63.3843,487.609,56.248" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="464.5" y="101.8979">new(reflect)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="474.2748" y="78.8062">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="433.3604" y="124.2682">n</text><!--link MongoLoopGroup to MongoLoop--><path d="M128.979,67.489 C118.04,85.02 104.787,106.258 93.8693,123.754 " fill="none" id="MongoLoopGroup-MongoLoop" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="86.9108,134.906,95.0691,129.3886,89.558,130.6642,88.2823,125.1531,86.9108,134.906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.558" x2="93.7929" y1="130.6642" y2="123.877"/><polygon fill="#FFFFFF" points="136.012,56.219,129.4424,59.1923,129.6602,66.4001,136.2298,63.4268,136.012,56.219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="117.5" y="101.8979">new</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="124.8523" y="78.7704">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="82.8431" y="124.1457">n</text><!--link AlgorithmLoopGroup to DataPacketQueue--><path d="M529.105,68.38 C531.523,74.17 533.766,80.18 535.5,86 C557.764,160.738 567.866,251.963 571.994,301.419 " fill="none" id="AlgorithmLoopGroup-DataPacketQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="573.026,314.5,576.3055,305.2132,572.6326,309.5155,568.3303,305.8426,573.026,314.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="572.6326" x2="572.003" y1="309.5155" y2="301.54"/><polygon fill="#FFFFFF" points="523.664,56.218,522.4637,63.3285,528.5657,67.1712,529.7659,60.0607,523.664,56.218" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="558.5" y="165.3979">poll()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="518.6676" y="78.7692">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="573.5705" y="303.7649">1</text><!--link MongoLoopGroup to MongoDataQueue--><path d="M150.888,69.25 C150.772,80.7 150.396,93.392 149.5,105 C146.807,139.906 147.903,149.277 138.5,183 C126.623,225.597 105.6654,271.929 90.5482,302.631 " fill="none" id="MongoLoopGroup-MongoDataQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="84.6714,314.38,92.275,308.1202,86.9082,309.9082,85.1202,304.5414,84.6714,314.38" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86.9082" x2="90.4869" y1="309.9082" y2="302.7535"/><polygon fill="#FFFFFF" points="150.919,56.056,146.9052,62.0468,150.8913,68.056,154.9051,62.0652,150.919,56.056" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="148.5" y="165.3979">poll()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="143.168" y="78.9814">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="80.0018" y="303.6127">1</text><!--link AlgorithmLoop to DataPacketQueue--><path d="M457.669,193.49 C483.286,225.066 521.477,272.141 547.152,303.789 " fill="none" id="AlgorithmLoop-DataPacketQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="555.67,314.289,553.1064,304.7796,552.52,310.406,546.8936,309.8197,555.67,314.289" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="552.52" x2="547.4795" y1="310.406" y2="304.1935"/><polygon fill="#FFFFFF" points="449.325,183.205,449.9986,190.3846,456.885,192.5241,456.2114,185.3446,449.325,183.205" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="445.8689" y="205.7532">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="542.6688" y="303.4972">1</text><!--link MongoLoop to MongoDataQueue--><path d="M72.5,196.267 C72.5,226.908 72.5,270.574 72.5,301.219 " fill="none" id="MongoLoop-MongoDataQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="72.5,314.289,76.5,305.289,72.5,309.289,68.5,305.289,72.5,314.289" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="72.5001" y1="309.289" y2="301.289"/><polygon fill="#FFFFFF" points="72.5,183.205,68.5,189.205,72.5,195.205,76.5,189.205,72.5,183.205" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="64.6906" y="205.7532">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="64.5594" y="303.4972">1</text><!--
@startuml
interface Runnable
'interface Queue
'Class ConcurrentLinkedQueue<E>

class Netty

class DataPacket
class UserData
enum ProtocolType
class DataProtocol

abstract class AbstractQueue
class DataPacketQueue
class MongoDataQueue

interface ILoop
interface Algorithm
abstract class AlgorithmLoop
abstract class MongoLoop
class AlgorithmLoopGroup
class MongoLoopGroup

Netty "1" o- -> "1" DataPacketQueue : offer(顺序添加数据包)
Netty - -> DataPacket : new()
class DataPacket {
- Object obj
- long recvTime
- ProtocolType type
- DataProtocol protocol
- UserData userData

+ DataProtocol : parseDataProtocol()
+ UserData : parseUserData()
}

'数据包之间的关系
DataPacket "1" o- -> "1" UserData
'队列之间的关系
DataPacketQueue - -|> AbstractQueue
MongoDataQueue - -|> AbstractQueue

class AbstractQueue<T> {
- Map<Integer, Queue<T>> map;
+ void : init(int queueCount)
+ void : offer(T t)
+ void : bind(ILoop loop)
}

'计算解析线程/Mongo入库线程
ILoop - -|> Runnable
AlgorithmLoop ..|> ILoop
AlgorithmLoop ..|> Algorithm

MongoLoop ..|> ILoop

AlgorithmLoopGroup "1" o- -> "n" AlgorithmLoop : new(reflect)
MongoLoopGroup "1" o- -> "n" MongoLoop : new

AlgorithmLoopGroup "1" o- -> "1" DataPacketQueue : poll()
MongoLoopGroup "1" o- -> "1" MongoDataQueue : poll()

AlgorithmLoop "1" o- -> "1" DataPacketQueue
MongoLoop "1" o- -> "1" MongoDataQueue

interface ILoop<T> {
+ void : bind()
+ void : doBind(Queue<T> queue)
}

@enduml

PlantUML version 1.2017.12(Thu Apr 27 00:06:36 CST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Server VM
Java Version: 1.8.0_60-b27
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>